/*******************************************************************************
 DO NOT EDIT
 This file was automatically generated by the Impulse C Compiler.

 Copyright (c) 2002-2011 by Impulse Accelerated Technologies, Inc.
 All rights reserved.

 This source file may be used and redistributed without charge
 subject to the provisions of the IMPULSE ACCELERATED TECHNOLOGIES,
 INC. REDISTRIBUTABLE IP LICENSE AGREEMENT, and provided that this
 copyright statement is not removed from the file, and that any
 derivative work contains this copyright notice.

 Stage Master is Copyright 2002-2005, Green Mountain Computing Systems, Inc.
 All rights reserved.
********************************************************************************/

#include "co.h"

/* Architecture Includes */
#include <stdlib.h>
#include "xio.h"
#include "xparameters.h"
#include "BubbleSort.h"

extern void *alloc_shared(size_t);

/* Run Procedures */
extern void Producer(co_stream);
extern void Sorter(co_stream, co_stream);
extern void Consumer(co_stream);

co_stream input1;
co_stream input2;
co_stream input3;
co_stream output1;
co_stream output2;
co_stream output3;

co_architecture co_initialize(void *arg)
{
	input1=co_stream_create("input1",INT_TYPE(32),32);
	input2=co_stream_create("input2",INT_TYPE(32),32);
	input3=co_stream_create("input3",INT_TYPE(32),32);
  output1=co_stream_create("output1",INT_TYPE(32),32);
  output2=co_stream_create("output2",INT_TYPE(32),32);
  output3=co_stream_create("output3",INT_TYPE(32),32);
  co_process_create("Producer",(co_function)Producer,
                    1,
                    input);
  co_process_create("Consumer",(co_function)Consumer,
                    1,
                    output);

  // TODO; add more process creations here

  /* Architecture Initialization */
  co_stream_attach(input1,XPAR_PLB_BUBBLESORT_ARCH_0_BASEADDR+0,HW_INPUT);
  co_stream_attach(output1,XPAR_PLB_BUBBLESORT_ARCH_0_BASEADDR+16,HW_OUTPUT);

  co_stream_attach(input1,XPAR_PLB_BUBBLESORT_ARCH_1_BASEADDR+0,HW_INPUT);
  co_stream_attach(output1,XPAR_PLB_BUBBLESORT_ARCH_1_BASEADDR+16,HW_OUTPUT);

  co_stream_attach(input1,XPAR_PLB_BUBBLESORT_ARCH_0_BASEADDR+0,HW_INPUT);
  co_stream_attach(output1,XPAR_PLB_BUBBLESORT_ARCH_0_BASEADDR+16,HW_OUTPUT);

  // TODO: add more streams here

  return(NULL);

}
